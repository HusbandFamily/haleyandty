<body>
    <div class="container">
        <!-- Secret Code Input -->
        <div id="code-container">
            <h2>Enter Your Guest Code</h2>
            <input type="text" id="guestCodeInput" placeholder="Enter your code">
            <button onclick="checkCode()">Submit</button>
            <p id="errorMessage" style="color: red; display: none;">Invalid code. Try again.</p>
        </div>

        <!-- Hidden Form -->
        <div id="rsvp-form" style="display: none;">
            <h2>RSVP Form</h2>
            <form id="contactForm">
                <label>Name</label>
                <input type="text" name="name" required>

                <label>RSVP</label>
                <input type="text" name="rsvp" required>

                <label>Dietary Restrictions</label>
                <textarea name="diet" required></textarea>

                <input type="hidden" name="code" id="hiddenCode">
                <button type="submit">Send</button>
            </form>
        </div>

        <script>
            const scriptURL = "YOUR_DEPLOYED_SCRIPT_URL_HERE";
            const form = document.getElementById('contactForm');
            const submitButton = form.querySelector('button[type="submit"]');
        
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                submitButton.textContent = "Sending...";
                submitButton.disabled = true;
        
                // Package form data
                const formData = new FormData(form);
        
                // Send data to Google Apps Script
                fetch(scriptURL, {
                    method: "POST",
                    body: new URLSearchParams(formData)
                })
                .then(response => response.text())
                .then(data => {
                    if (data === "Success") {
                        // ✅ Success! Clear form and show message
                        alert("RSVP Submitted! Thank you.");
                        form.reset();
                    } else {
                        // ❌ Something went wrong (like invalid code)
                        alert("There was an error. Please try again.");
                    }
                })
                .catch(error => {
                    console.error("Error:", error);
                    alert("There was a problem submitting your RSVP.");
                })
                .finally(() => {
                    submitButton.textContent = "Send";
                    submitButton.disabled = false;
                });
            });
        </script>

        </script>
    </div>
</body>
